<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/prism.css">
    <link rel="stylesheet" href="./css/styles.css">
    <script src="./js/prism.js" defer></script>
    <script src="./index.js" type="module"></script>

    <title>定義書RustコードコンバータWASM</title>
    <meta name="description" content="システム定義書からRustの構造体を自動生成するサイトです。このページではサンプルのCSVから定義書を作成することができます。" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
    <header>
        <meta charset="utf-8" />
        <h1>定義書RustコードコンバータWASM</h1>
    </header>
    <main>
        <!-- タブメニュー -->
        <div class="tabs">
          <div class="tab active" data-tab="sample" data-url="index.html">サンプルCSV変換</div>
          <div class="tab" data-url="custom-index.html">カスタムCSV変換</div>
        </div>

        <!-- サンプルCSV変換タブ内容 -->
        <div id="sample" class="tab-content active">
            <a id="rdd-format-link" href="https://docs.google.com/spreadsheets/d/1AXVg4XjH29HAD4s9mgJJ-_7WFBCtXn3tweTK68ERBaI/edit?usp=sharing" target="_blank">定義書フォーマット(Google スプレッドシート)</a>
            <input type="file" id="file-input" accept=".csv">
  
            <div id="radio-buttons-container">
                <label><input type="radio" name="impl-option" value="include" checked> 構造体 + コンストラクタ</label>
                <label><input type="radio" name="impl-option" value="struct-only"> 構造体のみ</label>
                <button id="re-output-btn">再出力</button>
            </div>
  
            <pre id="code-block"><code id="output" class="language-rust"></code></pre>
            <a id="download-btn" href="#" download="struct_output.txt">生成コードのダウンロード!</a>
        </div>
    </main>
    <footer>
        <p>
            <a href="https://qiita.com/sotanengel" target="_blank">Quita</a> | 
            <a href="https://github.com/sotanengel" target="_blank">GitHub</a>
        </p>
    </footer>

    <script>
      const tabs = document.querySelectorAll('.tab');

      tabs.forEach(tab => {
          tab.addEventListener('click', () => {
              if (tab.dataset.url) {
                  // URLが設定されている場合は、そのURLにリダイレクト
                  window.location.href = tab.dataset.url;
              } else {
                  // 通常のタブ切り替え処理
                  tabs.forEach(t => t.classList.remove('active'));
                  tab.classList.add('active');
      
                  document.querySelectorAll('.tab-content').forEach(content => {
                      content.classList.remove('active');
                  });
      
                  const activeContent = document.getElementById(tab.dataset.tab);
                  activeContent.classList.add('active');
              }
          });
      });

       // フッターを読み込む関数
       function loadFooter() {
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading footer:', error));
    }

    // ページが読み込まれたときにフッターを読み込む
    document.addEventListener('DOMContentLoaded', () => {
        loadFooter();
    });
    </script>
</body>
</html>
